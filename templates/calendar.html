{% extends "base.html" %}
{% block content %}

<div class="card">
  <div class="cal-head">
    <a class="btn-outline" href="{{ url_for('calendar_view', year=prev_y, month=prev_m) }}">← Prev</a>

    <div class="cal-title">
      <div class="cal-month">{{ month_name }} {{ year }}</div>
      <div class="cal-sub">Tap a day to open that day’s spider grid</div>
    </div>

    <a class="btn-outline" href="{{ url_for('calendar_view', year=next_y, month=next_m) }}">Next →</a>
  </div>
</div>

<div class="card cal-grid-card pad-bottom-safe">
  <div class="cal-grid">
    <div class="cal-dow">Sun</div><div class="cal-dow">Mon</div><div class="cal-dow">Tue</div>
    <div class="cal-dow">Wed</div><div class="cal-dow">Thu</div><div class="cal-dow">Fri</div>
    <div class="cal-dow">Sat</div>

    {% for week in weeks %}
      {% for d in week %}
        {% set dstr = d.isoformat() %}
        {% set in_month = (d.month == month) %}
        <a class="cal-day {% if not in_month %}muted{% endif %} {% if dstr == today.isoformat() %}today{% endif %}"
           href="{{ url_for('batch_view_day', batch_id=batch_id, day=dstr) }}">
          <div class="cal-day-num">{{ d.day }}</div>
        </a>
      {% endfor %}
    {% endfor %}
  </div>
</div>

{% endblock %}